"use strict";(self.webpackChunkworkflows_docs=self.webpackChunkworkflows_docs||[]).push([[481],{6462:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"workflows/semantic_pull_request","title":"Semantic Pull Request","description":"At VGV, we use conventional commits. This way, our commit history is clean and useful when we squash and merge \u2014 we can easily see the type and brief description of each PR. Note that this workflow can be customized to reflect the pull request types you want to enforce (e.g. feat, fix, docs, chore).","source":"@site/docs/workflows/semantic_pull_request.md","sourceDirName":"workflows","slug":"/workflows/semantic_pull_request","permalink":"/docs/workflows/semantic_pull_request","draft":false,"unlisted":false,"editUrl":"https://github.com/VeryGoodOpenSource/very_good_workflows/tree/main/site/docs/workflows/semantic_pull_request.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Pana","permalink":"/docs/workflows/pana"},"next":{"title":"Spell Check","permalink":"/docs/workflows/spell_check"}}');var n=o(4848),i=o(8453);const r={sidebar_position:8},l="Semantic Pull Request",c={},a=[{value:"Steps",id:"steps",level:2},{value:"Inputs",id:"inputs",level:2},{value:"<code>types</code>",id:"types",level:3},{value:"<code>scopes</code>",id:"scopes",level:3},{value:"GitHub Repository Configuration",id:"github-repository-configuration",level:2},{value:"Squash Merging",id:"squash-merging",level:3},{value:"GitHub Permissions",id:"github-permissions",level:3},{value:"Example Usage",id:"example-usage",level:2}];function u(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"semantic-pull-request",children:"Semantic Pull Request"})}),"\n",(0,n.jsxs)(s.p,{children:["At VGV, we use ",(0,n.jsx)(s.a,{href:"https://www.conventionalcommits.org/en/v1.0.0/",children:"conventional commits"}),". This way, our commit history is clean and useful when we squash and merge \u2014 we can easily see the type and brief description of each PR. Note that this workflow can be customized to reflect the pull request types you want to enforce (e.g. feat, fix, docs, chore)."]}),"\n",(0,n.jsx)(s.h2,{id:"steps",children:"Steps"}),"\n",(0,n.jsx)(s.p,{children:"The semantic pull request package workflow consists of the following step:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Ensure commit is semantic"}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"inputs",children:"Inputs"}),"\n",(0,n.jsx)(s.h3,{id:"types",children:(0,n.jsx)(s.code,{children:"types"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Optional"})," Configure which types are allowed (e.g. ",(0,n.jsx)(s.code,{children:'"feat, fix, docs"'}),")."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Note"}),": If not set, then the action uses the list of ",(0,n.jsx)(s.a,{href:"https://github.com/commitizen/conventional-commit-types",children:"Commitizen conventional commit types"}),"."]}),"\n",(0,n.jsx)(s.h3,{id:"scopes",children:(0,n.jsx)(s.code,{children:"scopes"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Optional"})," Configure which scopes are allowed (e.g. ",(0,n.jsx)(s.code,{children:'"dart_package, flutter_package"'}),")."]}),"\n",(0,n.jsx)(s.h2,{id:"github-repository-configuration",children:"GitHub Repository Configuration"}),"\n",(0,n.jsx)(s.h3,{id:"squash-merging",children:"Squash Merging"}),"\n",(0,n.jsxs)(s.p,{children:["To verify that this workflow will properly evaluate your pull request messages, we recommend configuring your GitHub repository to ",(0,n.jsx)(s.a,{href:"https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-pull-request-merges/configuring-commit-squashing-for-pull-requests",children:"allow squash merging"})," and setting the ",(0,n.jsx)(s.a,{href:"https://github.blog/changelog/2022-08-23-new-options-for-controlling-the-default-commit-message-when-merging-a-pull-request/",children:"default commit message"}),' to "Pull request title."']}),"\n",(0,n.jsx)(s.h3,{id:"github-permissions",children:"GitHub Permissions"}),"\n",(0,n.jsxs)(s.p,{children:["When running this workflow, the ",(0,n.jsx)(s.code,{children:"GITHUB_TOKEN"})," has to have the correct permissions to run successfully. On public repositories, the default settings grant the token enough permissions to run correctly. However, on private repositories, settings have to be updated. There are two ways of doing so:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Repository wide update."})," Inside your repository, go to ",(0,n.jsx)(s.em,{children:"Settings > Actions > General"}),", scroll down to the ",(0,n.jsx)(s.em,{children:"Workflow permissions"})," section and update it to allow ",(0,n.jsx)(s.em,{children:"Read and write permissions"}),". Don't forget to save the changes."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Workflow specific update."})," In your workflow ",(0,n.jsx)(s.code,{children:"yaml"})," file, you can modify the permissions for the ",(0,n.jsx)(s.code,{children:"GITHUB_TOKEN"}),". For this workflow to work you have to enable write permissions for pull requests in your job as follows."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"jobs:\n  build:\n    permissions:\n      pull-requests: write\n    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/semantic_pull_request.yml@v1\n"})}),"\n",(0,n.jsxs)(s.p,{children:["You can read more about this in the ",(0,n.jsx)(s.a,{href:"https://docs.github.com/en/actions/security-guides/automatic-token-authentication#modifying-the-permissions-for-the-github_token",children:"github documentation"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"name: My Workflow\n\non: pull_request\n\njobs:\n  build:\n    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/semantic_pull_request.yml@v1\n"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},8453:(e,s,o)=>{o.d(s,{R:()=>r,x:()=>l});var t=o(6540);const n={},i=t.createContext(n);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);